SRCH-01 — Успешный поиск (позитив)

Цель. Проверить, что по валидному запросу показываются подходящие товары.
Предусловия. Открыт /en_US/ → перейти в Dresses. Зафиксировать “базовое” состояние: список названий и количество карточек (baselineList, baselineCount), текущие значения Show и Sort. В поле поиска пусто.
Данные. query = "tunic" (любой заведомо существующий фрагмент названия).

Шаги.

В поле поиска ввести tunic.

Нажать кнопку с лупой (Search).

Ожидаемо.

В URL появляется criteria[search][value]=tunic.

Инфо-баннер “There are no results to display” не отображается.

Отображается ≥1 карточка товара.

Для каждой карточки заголовок содержит tunic (case-insensitive).

Количество карточек 1..baselineCount.

Значения Show и Sort не изменились относительно базовых.




SRCH-02 — Поиск без результатов (негатив)

Цель. Убедиться, что при отсутствии совпадений показывается корректное сообщение и пустая сетка.
Предусловия. На странице Dresses, поле поиска пусто.
Данные. query = "about" (или любой заведомо несуществующий фрагмент).

Шаги.

Ввести about.

Нажать кнопку с лупой.

Ожидаемо.

В URL есть criteria[search][value]=about.

Появляется голубой инфо-баннер: “There are no results to display”.

Сетка товаров пуста (0 карточек), пагинации нет.

Show и Sort остались прежними.




SRCH-03 — Сброс поиска кнопкой “X” (reset к дефолту)

Цель. Проверить, что крестик очищает поле и возвращает страницу к базовому состоянию.
Предусловия. Выполнен SRCH-01 (есть активный запрос и отфильтрованный список). Сохранены baselineList/baselineCount из предусловий SRCH-01.

Шаги.

Нажать кнопку “X” (Clear) справа от поля поиска.

Ожидаемо.

Поле поиска пустое.

Параметр criteria[search][value] исчез из URL.

Исчезает инфо-баннер (если был).

Сетка товаров полностью совпадает с baselineList (и по количеству, и по названиям).

Значения Show и Sort соответствуют исходным.




Заметки по автоматизации (чтобы тесты были стабильными)

После действий ждем одного из устойчивых критериев:
expect(URL).toContain('criteria[search][value]=...') или появления/исчезновения инфо-баннера, или завершения сети по networkidle.

Для SRCH-03 сравнивайте именно набор названий (а не только count), чтобы точно подтвердить возврат к дефолту.

Проверку “каждый заголовок содержит запрос” делайте case-insensitive и с trim() — так тест не зависит от регистра и пробелов.